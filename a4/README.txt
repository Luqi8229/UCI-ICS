publish_command goes straight into sending due to Assignment 3's Restriction

